{
  "id": "bahmni.registration",
  "instanceOf": "bahmni.template.registration",
  "description": "Bahmni Patient Registration App",
  "extensionPoints": [
    {
      "id": "org.bahmni.registration.patient.search.result.action",
      "description": "Bahmni Patient Search Result Action"
    },
    {
      "id": "org.bahmni.registration.patient.next",
      "description": "After Bahmni Patient Registration, forward url configuration"
    },
    {
      "id": "org.bahmni.registration.navigation",
      "description": "Navigation within registration first and second page"
    },
    {
      "id": "org.bahmni.registration.conceptSetGroup.observations",
      "description": "Registration Second Page Forms"
    }
  ],
  "contextModel": [
    "patientUuid",
    "activeVisitUuid"
  ],
  "config": {
    "patientInformation": {
      "additionalPatientInformation": {
        "title": "Additional Patient Information",
        "attributes": [
          "distanceFromCenter",
          "isUrban",
          "cluster",
          "RationCard",
          "familyIncome",
          "debt",
          "email"
        ]
      },
      "hidden": {
        "attributes": [
          "primaryContact"
        ]
      },
      "defaults": {
        "class": "General",
        "landHolding": 2
      },
      "addressFields": [
        { "name": "address1",      "label": "House No. / Street",  "required": true },
        { "name": "address2",      "label": "Barangay",            "required": true },
        { "name": "cityVillage",   "label": "City / Municipality", "required": true },
        { "name": "stateProvince", "label": "Province",            "required": true },
        { "name": "postalCode",    "label": "ZIP Code" },
        { "name": "country",       "label": "Country", "default": "Philippines" }
      ]
    },

    "addressHierarchy": {
      "useAddressHierarchy": false,
      "showAddressFieldsTopDown": true
    },

    "relationshipTypeMap": {
      "Doctor": "provider",
      "Parent": "patient"
    },

    "autoCompleteFields": ["familyName"],
    "defaultIdentifierPrefix": "PHN",
    "defaultVisitType": "OPD",
    "searchByIdForwardUrl": "/patient/{{patientUuid}}",
    "showMiddleName": true,
    "showLastName": true,
    "isLastNameMandatory": true,
    "patientNameDisplayOrder": ["firstName", "middleName", "lastName"],
    "showSaveConfirmDialog": false,
    "showBirthTime": true,
    "showCasteSameAsLastNameCheckbox": false,

    "printOptions": [
      {
        "translationKey": "REGISTRATION_PRINT_REG_CARD_LOCAL_KEY",
        "templateUrl": "/bahmni_config/openmrs/apps/registration/registrationCardLayout/print_local.html",
        "shortcutKey": "l"
      },
      {
        "translationKey": "REGISTRATION_PRINT_REG_CARD_KEY",
        "templateUrl": "/bahmni_config/openmrs/apps/registration/registrationCardLayout/print.html",
        "shortcutKey": "p"
      },
      {
        "translationKey": "REGISTRATION_PRINT_SUPPLEMENTAL_PAPER",
        "templateUrl": "/bahmni_config/openmrs/apps/registration/supplementalPaperLayout/print.html",
        "shortcutKey": "r"
      },
      {
        "translationKey": "REGISTRATION_PRINT_WITH_BARCODE",
        "templateUrl": "/bahmni_config/openmrs/apps/registration/registrationCardLayout/printWithBarcode.html",
        "shortcutKey": "c"
      }
    ],

    "conceptSetUI": {
      "REGISTRATION FEES": {
        "required": true,
        "label": "Fee"
      },
      "FHS": {
        "buttonSelect": true
      },
      "defaults": {
        "FHS": "Present"
      }
    },

    "fieldValidation": {
      "email": {
        "pattern": "^(?=.{1,40}$)(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})$",
        "errorMessage": "Should be a valid email address"
      },
      "familyName": {
        "pattern": "^[A-Za-zÀ-ÖØ-öø-ÿ .'-]{1,}$",
        "errorMessage": "Last name can include letters, spaces, hyphens, apostrophes, and periods."
      },
      "givenName": {
        "pattern": "^[A-Za-zÀ-ÖØ-öø-ÿ .'-]{1,}$",
        "errorMessage": "First name can include letters, spaces, hyphens, apostrophes, and periods."
      },
      "middleName": {
        "pattern": "^[A-Za-zÀ-ÖØ-öø-ÿ .'-]{1,}$",
        "errorMessage": "Middle name can include letters, spaces, hyphens, apostrophes, and periods."
      },
      "address1": {
        "pattern": "^[A-Za-z0-9À-ÖØ-öø-ÿ\\s,'\\-\\.\\/#]{1,}$",
        "errorMessage": "Only letters/numbers and , ' - . / # allowed."
      },
      "address2": {
        "pattern": "^[A-Za-z0-9À-ÖØ-öø-ÿ\\s,'\\-\\.\\/#]{0,}$",
        "errorMessage": "Only letters/numbers and , ' - . / # allowed."
      },
      "cityVillage": {
        "pattern": "^[A-Za-z0-9À-ÖØ-öø-ÿ\\s,'\\-\\.\\/]{2,}$",
        "errorMessage": "City/Municipality: use letters/numbers and , ' - . /"
      },
      "stateProvince": {
        "pattern": "^[A-Za-zÀ-ÖØ-öø-ÿ\\s,'\\-\\.\\/]{2,}$",
        "errorMessage": "Province: use letters and , ' - . /"
      },
      "country": {
        "pattern": "^[A-Za-zÀ-ÖØ-öø-ÿ\\s.'-]{2,}$",
        "errorMessage": "Country: letters, spaces, hyphens, apostrophes, periods."
      }
    },

    "patientSearch": {
      "address": {
        "label": "Barangay",
        "placeholder": "Enter barangay",
        "field": "address2"
      },
      "customAttributes": {
        "label": "Phone Number",
        "placeholder": "Phone Number",
        "fields": ["phoneNumber", "alternatePhoneNumber"]
      }
    }
  }
}

